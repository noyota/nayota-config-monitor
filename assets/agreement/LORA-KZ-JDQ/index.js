this["LORA-KZ-JDQ"]=function(r){var t={};function e(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return r[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=r,e.c=t,e.d=function(r,t,n){e.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:n})},e.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},e.t=function(r,t){if(1&t&&(r=e(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var o in r)e.d(n,o,function(t){return r[t]}.bind(null,o));return n},e.n=function(r){var t=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(t,"a",t),t},e.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},e.p="",e(e.s=0)}([function(r,t,e){"use strict";function n(r,t){var e=this;this.options=r,this.he=t.he,this.numToHexStr=t.numToHexStr,r.defaultCheck.forEach(function(r){e["analysis"+r.address]=r.analysis})}n.prototype.config=function(r,t,e,n,o){var i=null;if(o.forEach(function(r){"Heartbeat"===r.key&&(i=r.value)}),!i)throw new Error("球阀LORA设置参数不全，请确认参数是否设置。");i=this.numToHexStr(i,4);var a=n.factor,u=n.bandwidth,f=n.codingrate,s="aa000002"+r+a+u+t+parseInt(n.frequency,16).toString(16)+f+i+e;return{cmd:s="aa0000"+this.he(s)+"ff22"}},n.prototype.read=function(r,t){var e="aa"+r.loraAddr+"0400";return e=this.he(e),{cmd:e="aa"+r.netAddr+e+"ff22",resolve:function(t,e,n){if(t.length<22)return n(400);var o=t.indexOf("aa"+r.netAddr.toLowerCase()),i=t.indexOf("ff22");if(o<0||i<0)return n(401);if("84"!==t.substring(12,14))return n(402);e({0:parseInt(t.substring(14,15))-1,1:parseInt(t.substring(15,16))-1})}}},n.prototype.write=function(r,t,e,n){0!==t&&"0"!==t||(e=(e+1).toString()+"0"),1!==t&&"1"!==t||(e="0"+(e+1).toString());var o="aa"+r.loraAddr+"04"+e;return o=this.he(o),{cmd:o="aa"+r.netAddr+o+"ff22",resolve:function(t,e,n){if(t.length<22)return n(400);var o=t.indexOf("aa"+r.netAddr.toLowerCase()),i=t.indexOf("ff22");if(o<0||i<0)return n(401);var a=t.substring(12,14);if("84"!==a)return n(402);var u=0;return"0"===a?u=parseInt(t.substring(14,15))-1:"1"===a&&(u=parseInt(t.substring(15,16))-1),e(u)}}},n.prototype.decode=function(r,t){if(void 0===t.netAddr||void 0===t.loraAddr)return"";var e=r.indexOf("aa"+t.netAddr.toLowerCase()),n=r.indexOf("ff22");if(e<0||n<0)return"";if((r=r.substring(e+6,n)).indexOf("aa"+t.loraAddr.toLowerCase())<0)return"";if("99"===r.substring(6,8))return{};return{0:parseInt(r.substring(8,9))-1,1:parseInt(r.substring(9,10))-1}},r.exports=n}]);