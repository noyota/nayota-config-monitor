this["UEN-125"]=function(r){var e={};function t(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return r[s].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=r,t.c=e,t.d=function(r,e,s){t.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:s})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,e){if(1&e&&(r=t(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var s=Object.create(null);if(t.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var o in r)t.d(s,o,function(e){return r[e]}.bind(null,o));return s},t.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(e,"a",e),e},t.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},t.p="",t(t.s=0)}([function(module,exports,__webpack_require__){"use strict";function Relay(r,e){this.addrmin=1,this.addrmax=255,this.validate=e,this.button=[0,1,2,3],this.options=r;var t=this;t.checksAddress=[],r.defaultCheck.forEach(function(r){t["analysis"+r.address]=r.analysis,t.checksAddress.push(r.address)}),r.defaultOperate.forEach(function(r){t["analysis"+r.address]=r.analysis})}var rmDb=function(r){return r};Relay.prototype.find=function(r,e){r&&"string"==typeof r&&(r=parseInt(r)),e&&"string"==typeof e&&(e=parseInt(e));for(var t=r||this.addrmin,s=e||this.addrmax,o="";t<=s;){for(var n=t.toString(16);n.length<2;)n="0"+n;o+=this.validate.crc16(n+"0400100002")+",",t++}var a=this.validate,i=this.options.name,d=this.options.defaultCheck,c=this.options.defaultOperate,u=[];return void 0!==this.options.attribute&&(u=this.options.attribute),{cmd:o.substr(0,o.length-1),resolve:function(r,e,t){if(r.length<18)return t(400);var s=r.substr(0,r.length-4);if(a.crc16(s).toLowerCase()!==r.toLowerCase())return t(401);if("04"!==r.substr(2,2))return t(402);var o=r.substr(0,2),n={shortAddress:o,name:i+o,checks:d,operates:c,attribute:u};return console.log(n),e(n)},changeAddr:!0}},Relay.prototype.changeAddr=function(r){for("number"==typeof r.shortAddress&&(r.shortAddress=r.shortAddress.toString(16));r.shortAddress.length<2;)r.shortAddress="0"+r.shortAddress;for("number"==typeof r.oldAddr&&(r.oldAddr=r.oldAddr.toString(16));r.oldAddr.length<2;)r.oldAddr="0"+r.oldAddr;var e=r.oldAddr+"06015600"+r.shortAddress;e=this.validate.crc16(e);var t=this.validate,s=this.options.name,o=this.options.defaultOperate,n=this.options.defaultCheck,a=[];return void 0!==this.options.attribute&&(a=this.options.attribute),{cmd:e,resolve:function(e,i,d){if(e.length<16)return d(400);var c=e.substr(0,e.length-4);return t.crc16(c).toUpperCase()!==e.toUpperCase()?d(401):"06"!==e.substr(2,2)?d(402):i({shortAddress:r.shortAddress,name:s+r.shortAddress,checks:n,operates:o,attribute:a})}}},Relay.prototype.read=function(addr,code){null==code?code=this.checksAddress:"string"==typeof code&&(code=[code]);for(var analysis=[],_this=this;addr.length<2;)addr="0"+addr;var commond1=this.validate.crc16(addr+"04 00 10 00 02"),commond2=this.validate.crc16(addr+"04 00 12 00 01"),commond3=this.validate.crc16(addr+"04 00 13 00 02"),commond4=this.validate.crc16(addr+"04 00 15 00 01"),commond5=this.validate.crc16(addr+"04 00 1D 00 01"),commond6=this.validate.crc16(addr+"04 00 16 00 02"),commond7=this.validate.crc16(addr+"04 00 18 00 02"),cmd=[],allOperates=["1"];allOperates.forEach(function(r){code.push(r)}),code.forEach(function(r){"10"===r&&cmd.push(commond1),"12"===r&&cmd.push(commond2),"13"===r&&cmd.push(commond3),"15"===r&&cmd.push(commond4),"1"===r&&cmd.push(commond5),"16"===r&&cmd.push(commond6),"18"===r&&cmd.push(commond7),analysis.push(_this["analysis"+r])});var validate=this.validate;return{cmd:cmd.join(","),resolve:function resolve(result,success,error){var data=result.split(",");if(data.length!==cmd.length)return error(400);for(var res={},allChecks={},i=0;i<data.length;i++){var item=rmDb(data[i]),validatedata=validate.crc16(item.substr(0,item.length-4));if(validatedata.toLowerCase()!==item.toLowerCase())return error(401);var addrback=item.substr(0,2);if(addrback!==addr.toLowerCase())return error(403);if(cmd[i]===commond1){var func=item.substr(2,2);if("04"!==func)return error(402);allChecks[10]=item.substr(6,8)}else if(cmd[i]===commond2){var _func=item.substr(2,2);if("04"!==_func)return error(402);allChecks[12]=item.substr(6,4)}else if(cmd[i]===commond3){var _func2=item.substr(2,2);if("04"!==_func2)return error(402);allChecks[13]=item.substr(6,8)}else if(cmd[i]===commond4){var _func3=item.substr(2,2);if("04"!==_func3)return error(402);allChecks[15]=item.substr(6,4)}else if(cmd[i]===commond5){var _func4=item.substr(2,2);if("04"!==_func4)return error(402);allChecks[1]=item.substr(6,4)}else if(cmd[i]===commond6){var _func5=item.substr(2,2);if("04"!==_func5)return error(402);allChecks[16]=item.substr(6,8)}else if(cmd[i]===commond7){var _func6=item.substr(2,2);if("04"!==_func6)return error(402);allChecks[18]=item.substr(6,8)}}code.forEach(function(item,index){var analyze=null;eval(analysis[index]),allChecks[item]&&analyze&&(res[item]=analyze(allChecks[item]))}),console.log(res),success(res)}}},Relay.prototype.write=function(r,e,t){for("number"==typeof r&&(r=r.toString(16));r.length<2;)r="0"+r;t=parseInt(t),console.log(t),1===t?t="01":0===t&&(t="04");var s=this.validate,o=[this.validate.crc16(r+"0601D000"+t)];return{cmd:o.join(","),resolve:function(e,t,n){var a=e.split(",");if(a.length!==o.length)return n(400);for(var i=0;i<a.length;i++){var d=a[i];if(d=d.substr(0,d.length-4),s.crc16(d).toLowerCase()!==a[i].toLowerCase())return n(401);if(d.substr(0,2).toLowerCase()!==r.toLowerCase())return n(403)}if("06"!==d.substr(2,2))return n(402);var c=d.substr(10,2);return"04"===c?c=0:"01"===c&&(c=1),t(c)}}},Relay.prototype.navi=function(r){return r?r.substr(0,2):null},module.exports=Relay}]);